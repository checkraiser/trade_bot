#!/usr/bin/env ruby

base_path = File.expand_path(File.join(File.dirname(__FILE__), '../lib'))
$LOAD_PATH.unshift(base_path) unless $LOAD_PATH.include?(base_path)

require 'trade_bot'

# Setup our actors
Celluloid::Actor[:incoming_data] = TradeBot::PubNubActor.new
Celluloid::Actor[:ichimoku_bot]  = TradeBot::IchimokuActor.new('ichimoku')
Celluloid::Actor[:processing]    = TradeBot::DataProcessingActor.new

# Start receiving data
Celluloid::Actor[:incoming_data].start

loop { sleep 1 }
